# Render.com configuration for API
# Deploy: Connect GitHub repo and point to this file
#
# SIMPLIFIED VERSION - No extra security (good for internal projects)
# For production with security, see HYBRID_DEPLOY.md

services:
  - type: web
    name: best-lap-api
    env: docker
    dockerfilePath: ./apps/api/Dockerfile
    dockerContext: .
    region: oregon # ou "ohio" (mais próximo da us-east-1 do EC2)
    plan: free # ou "starter" ($7/mês para sem sleep)
    healthCheckPath: /health
    envVars:
      - key: NODE_ENV
        value: production
      - key: API_PORT
        value: 3333

      # Database (EC2)
      - key: DB_HOST
        value: ec2-75-101-196-198.compute-1.amazonaws.com # SUBSTITUA PELO SEU IP!
      - key: DB_PORT
        value: 5432
      - key: DB_USER
        value: best_lap
      - key: DB_PASSWORD
        value: best_lap
      - key: DB_NAME
        value: best_lap_db

      # Redis (EC2)
      - key: REDIS_HOST
        value: ec2-75-101-196-198.compute-1.amazonaws.com # SUBSTITUA PELO SEU IP!
      - key: REDIS_PORT
        value: 6379

      # External APIs
      - key: GOOGLE_API_KEY
        value: # Deixe vazio ou adicione sua chave

      # CORS (atualizar depois com URL do dashboard)
      - key: CORS_ORIGIN
        value: "*"

      # Swagger
      - key: FORCE_HTTP_SWAGGER
        value: false
